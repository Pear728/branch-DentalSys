{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nVue.use(VueRouter);\nconst routes = [{\n  path: '/',\n  redirect: '/login'\n}, {\n  path: '/login',\n  name: 'Login',\n  component: () => import('../views/Login.vue')\n}, {\n  path: '/register',\n  name: 'Register',\n  component: () => import('../views/Register.vue')\n},\n// 患者端路由\n{\n  path: '/patient',\n  component: () => import('../views/patient/Layout.vue'),\n  children: [{\n    path: '',\n    redirect: 'home'\n  }, {\n    path: 'home',\n    name: 'PatientHome',\n    component: () => import('../views/patient/Home.vue')\n  }, {\n    path: 'appointment',\n    name: 'PatientAppointment',\n    component: () => import('../views/patient/Appointment.vue')\n  }, {\n    path: 'records',\n    name: 'PatientRecords',\n    component: () => import('../views/patient/MedicalRecords.vue')\n  }, {\n    path: 'payment',\n    name: 'PatientPayment',\n    component: () => import('../views/patient/Payment.vue')\n  }, {\n    path: 'profile',\n    name: 'PatientProfile',\n    component: () => import('../views/patient/Profile.vue')\n  }]\n},\n// 医生端路由\n{\n  path: '/doctor',\n  component: () => import('../views/doctor/Layout.vue'),\n  children: [{\n    path: '',\n    redirect: 'home'\n  }, {\n    path: 'home',\n    name: 'DoctorHome',\n    component: () => import('../views/doctor/Home.vue')\n  }, {\n    path: 'appointments',\n    name: 'DoctorAppointments',\n    component: () => import('../views/doctor/Appointments.vue')\n  }, {\n    path: 'records',\n    name: 'DoctorMedicalRecords',\n    component: () => import('../views/doctor/MedicalRecords.vue')\n  }, {\n    path: 'schedule',\n    name: 'DoctorSchedule',\n    component: () => import('../views/doctor/Schedule.vue')\n  }, {\n    path: 'profile',\n    name: 'DoctorProfile',\n    component: () => import('../views/doctor/Profile.vue')\n  }]\n},\n// 管理员端路由\n{\n  path: '/admin',\n  component: () => import('../views/admin/Layout.vue'),\n  children: [{\n    path: '',\n    redirect: 'home'\n  }, {\n    path: 'home',\n    name: 'AdminHome',\n    component: () => import('../views/admin/Home.vue')\n  }, {\n    path: 'users',\n    name: 'AdminUsers',\n    component: () => import('../views/admin/Users.vue')\n  }, {\n    path: 'settings',\n    name: 'AdminSettings',\n    component: () => import('../views/admin/Settings.vue')\n  }, {\n    path: 'data',\n    name: 'AdminData',\n    component: () => import('../views/admin/Data.vue')\n  }]\n}, {\n  path: '*',\n  redirect: '/'\n}];\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n});\n\n// 路由守卫，检查登录状态\nrouter.beforeEach((to, from, next) => {\n  const publicPages = ['/login', '/register'];\n  const authRequired = !publicPages.includes(to.path);\n  const user = JSON.parse(localStorage.getItem('user'));\n\n  // 需要登录但用户未登录时，重定向到登录页\n  if (authRequired && !user) {\n    next('/login');\n  } else {\n    // 根据用户角色限制访问\n    if (user) {\n      const role = user.role;\n      if (to.path.startsWith('/patient') && role !== 1) {\n        next('/login');\n      } else if (to.path.startsWith('/doctor') && role !== 2) {\n        next('/login');\n      } else if (to.path.startsWith('/admin') && role !== 3) {\n        next('/login');\n      } else {\n        next();\n      }\n    } else {\n      next();\n    }\n  }\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","use","routes","path","redirect","name","component","children","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","publicPages","authRequired","includes","user","JSON","parse","localStorage","getItem","role","startsWith"],"sources":["D:/Desktop/AI项目/进行中/20250415-WX-07/工作文件/dental-system/frontend/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: '/',\n    redirect: '/login'\n  },\n  {\n    path: '/login',\n    name: 'Login',\n    component: () => import('../views/Login.vue')\n  },\n  {\n    path: '/register',\n    name: 'Register',\n    component: () => import('../views/Register.vue')\n  },\n  // 患者端路由\n  {\n    path: '/patient',\n    component: () => import('../views/patient/Layout.vue'),\n    children: [\n      {\n        path: '',\n        redirect: 'home'\n      },\n      {\n        path: 'home',\n        name: 'PatientHome',\n        component: () => import('../views/patient/Home.vue')\n      },\n      {\n        path: 'appointment',\n        name: 'PatientAppointment',\n        component: () => import('../views/patient/Appointment.vue')\n      },\n      {\n        path: 'records',\n        name: 'PatientRecords',\n        component: () => import('../views/patient/MedicalRecords.vue')\n      },\n      {\n        path: 'payment',\n        name: 'PatientPayment',\n        component: () => import('../views/patient/Payment.vue')\n      },\n      {\n        path: 'profile',\n        name: 'PatientProfile',\n        component: () => import('../views/patient/Profile.vue')\n      }\n    ]\n  },\n  // 医生端路由\n  {\n    path: '/doctor',\n    component: () => import('../views/doctor/Layout.vue'),\n    children: [\n      {\n        path: '',\n        redirect: 'home'\n      },\n      {\n        path: 'home',\n        name: 'DoctorHome',\n        component: () => import('../views/doctor/Home.vue')\n      },\n      {\n        path: 'appointments',\n        name: 'DoctorAppointments',\n        component: () => import('../views/doctor/Appointments.vue')\n      },\n      {\n        path: 'records',\n        name: 'DoctorMedicalRecords',\n        component: () => import('../views/doctor/MedicalRecords.vue')\n      },\n      {\n        path: 'schedule',\n        name: 'DoctorSchedule',\n        component: () => import('../views/doctor/Schedule.vue')\n      },\n      {\n        path: 'profile',\n        name: 'DoctorProfile',\n        component: () => import('../views/doctor/Profile.vue')\n      }\n    ]\n  },\n  // 管理员端路由\n  {\n    path: '/admin',\n    component: () => import('../views/admin/Layout.vue'),\n    children: [\n      {\n        path: '',\n        redirect: 'home'\n      },\n      {\n        path: 'home',\n        name: 'AdminHome',\n        component: () => import('../views/admin/Home.vue')\n      },\n      {\n        path: 'users',\n        name: 'AdminUsers',\n        component: () => import('../views/admin/Users.vue')\n      },\n      {\n        path: 'settings',\n        name: 'AdminSettings',\n        component: () => import('../views/admin/Settings.vue')\n      },\n      {\n        path: 'data',\n        name: 'AdminData',\n        component: () => import('../views/admin/Data.vue')\n      }\n    ]\n  },\n  {\n    path: '*',\n    redirect: '/'\n  }\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\n// 路由守卫，检查登录状态\nrouter.beforeEach((to, from, next) => {\n  const publicPages = ['/login', '/register']\n  const authRequired = !publicPages.includes(to.path)\n  const user = JSON.parse(localStorage.getItem('user'))\n\n  // 需要登录但用户未登录时，重定向到登录页\n  if (authRequired && !user) {\n    next('/login')\n  } else {\n    // 根据用户角色限制访问\n    if (user) {\n      const role = user.role\n      if (to.path.startsWith('/patient') && role !== 1) {\n        next('/login')\n      } else if (to.path.startsWith('/doctor') && role !== 2) {\n        next('/login')\n      } else if (to.path.startsWith('/admin') && role !== 3) {\n        next('/login')\n      } else {\n        next()\n      }\n    } else {\n      next()\n    }\n  }\n})\n\nexport default router\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}